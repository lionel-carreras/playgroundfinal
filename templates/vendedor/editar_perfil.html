{% extends 'base/base.html' %}
{% block title %}Editar Perfil{% endblock %}
{% load static %} 

{% block content %}
<div class="container mt-5" style="max-width: 600px;">
  <h2 class="mb-4">Editar Perfil</h2>

  <div class="text-center mb-4">
  {% if profile.avatar %}
    <img src="{{ profile.avatar.url }}" 
         alt="Avatar" 
         class="rounded-circle"
         style="width:120px; height:120px; object-fit:cover;">
  {% else %}
    <img src="/media/avatar/default_avatar.png"
         alt="Avatar por defecto"
         class="rounded-circle"
         style="width:120px; height:120px; object-fit:cover;">
  {% endif %}

  <form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    {{ user_form.non_field_errors }}
    {% for field in user_form %}
      <div class="mb-3">
        <label for="{{ field.id_for_label }}" class="form-label"></label>
        {{ field }}
        {% for error in field.errors %}
          <div class="text-danger">{{ error }}</div>
        {% endfor %}
      </div>
    {% endfor %}
    <hr>
    {{ profile_form.non_field_errors }}
    {% for field in profile_form %}
      <div class="mb-3">
        <label for="{{ field.id_for_label }}" class="form-label"></label>
        {{ field }}
        {% for error in field.errors %}
          <div class="text-danger">{{ error }}</div>
        {% endfor %}
      </div>
    {% endfor %}

    <button type="submit" class="btn btn-success">Guardar Cambios</button>
    <a href="{% url 'products:perfil' %}" class="btn btn-secondary ms-2">Cancelar</a>
  </form>

  <hr class="my-4">
  <div class="text-center">
    <a href="{% url 'accounts:password_change' %}" class="btn btn-outline-warning">
      Cambiar Contrase√±a
    </a>
  </div>
</div>
</div>
{% endblock %}
